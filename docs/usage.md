# 功能使用说明

## 启动程序

```bash
go run main.go [content目录路径]
```

启动后会显示交互式菜单界面。

## 主菜单功能

### 📊 数据查看模块

#### 1. 标签统计与分析
- **查看所有标签**: 显示所有标签及其使用频率
- **查看特定标签详情**: 输入标签名查看使用该标签的所有文章
- **按频率分组查看**: 
  - 高频标签 (≥5篇文章)
  - 中频标签 (2-4篇文章)  
  - 低频标签 (1篇文章)

#### 2. 分类统计
显示所有分类及其文章数量、占比信息

#### 3. 无标签文章
列出所有没有标签的文章，便于后续添加标签

### 🏷️ 标签页面管理

#### 4. 预览标签页面
- 扫描所有标签并生成翻译预览
- 显示将要创建的目录结构
- 展示新建/更新的页面数量统计

#### 5. 生成标签页面
- **处理模式选择**:
  - 仅新增: 只为没有页面的标签创建页面
  - 仅更新: 只更新已存在的标签页面
  - 全部处理: 新建+更新所有标签页面

生成的文件结构：
```
content/tags/
├── 标签名1/
│   └── _index.md
├── 标签名2/
│   └── _index.md
└── ...
```

每个 `_index.md` 包含：
```yaml
---
title: 标签名
slug: "english-slug"
description: 包含 N 篇关于 标签名 的文章
---
```

### 📝 文章Slug管理

#### 6. 预览文章Slug
- 扫描所有文章并分析Slug状态
- 显示缺少Slug的文章数量
- 预览生成的Slug示例（前5个）

#### 7. 生成文章Slug
- **处理模式选择**:
  - 仅新增: 只为缺少slug的文章添加
  - 仅更新: 只更新已有的slug
  - 全部处理: 新增+更新所有文章

为文章添加或更新Front Matter中的slug字段：
```yaml
---
title: "我的文章标题"
slug: "my-article-title"
date: 2024-01-01
---
```

### 💾 缓存管理

#### 8. 查看缓存状态
显示翻译缓存的详细信息：
- 缓存文件位置
- 版本信息
- 最后更新时间
- 翻译条目数量

#### 9. 清空翻译缓存
清空所有已缓存的翻译，下次翻译时会重新请求AI服务

## AI翻译功能

### 翻译原理
1. **中文检测**: 自动识别中文标签
2. **AI翻译**: 使用LM Studio进行智能翻译
3. **格式规范**: 自动转换为符合URL规范的slug格式
4. **缓存存储**: 翻译结果本地缓存，避免重复请求

### 翻译规则
- 使用小写字母
- 单词间用连字符(-)连接
- 移除特殊字符
- 保持简洁准确

### 备用翻译
当AI翻译失败时，自动使用预定义的翻译映射：
```go
"人工智能" -> "artificial-intelligence"
"机器学习" -> "machine-learning"
"前端开发" -> "frontend-development"
// ... 更多映射
```

## 批量处理

### 标签批量翻译
- 自动收集所有需要翻译的标签
- 利用缓存减少重复翻译
- 显示处理进度和统计信息

### 文章批量处理
- 扫描指定目录下的所有Markdown文件
- 解析Front Matter内容
- 批量生成或更新slug字段

## 缓存机制

### 缓存文件格式
```json
{
  "version": "1.0",
  "last_updated": "2024-01-01T12:00:00Z",
  "translations": {
    "标签名": {
      "translation": "tag-name",
      "created_at": "2024-01-01T12:00:00Z",
      "updated_at": "2024-01-01T12:00:00Z"
    }
  }
}
```

### 缓存策略
- 首次翻译时写入缓存
- 后续使用直接从缓存读取
- 支持手动清空重新翻译

## 输出格式

### 统计表格
使用彩色表格显示统计数据：
- 🔴 红色: 高频标签/新建操作
- 🟡 黄色: 中频标签/更新操作  
- 🔵 蓝色: 低频标签/跳过操作
- 🟢 绿色: 成功状态

### 进度指示
- 实时显示处理进度
- 详细的错误信息提示
- 操作结果统计汇总

## 最佳实践

### 使用建议
1. **首次使用**: 先运行数据查看功能了解博客现状
2. **标签管理**: 定期检查并清理低频标签
3. **备份**: 在批量操作前备份重要文件
4. **测试**: 在小范围内测试后再进行批量操作

### 性能优化
1. **缓存利用**: 充分利用翻译缓存减少API调用
2. **分批处理**: 大量文章建议分批处理
3. **网络稳定**: 确保LM Studio连接稳定

## 故障排除

常见问题请参考 [故障排除指南](troubleshooting.md)
