# 功能使用说明

[English](usage_en.md) | 中文

## 启动程序

```bash
go run main.go [content目录路径]
```

启动后会显示交互式菜单界面。

## 主菜单功能

### 🚀 快速处理

#### 1. 一键处理全部
自动执行完整的处理流程：
1. 生成全量翻译缓存
2. 生成新增标签页面
3. 生成缺失文章Slug
4. 翻译新增文章为英文

系统会先进行智能分析，显示需要处理的内容预览：
- 📊 需要翻译的项目数量
- 🏷️ 需要创建的标签页面数量
- 📝 需要添加Slug的文章数量
- 🌐 需要翻译的文章数量

确认后自动执行所有步骤，每个步骤都有进度显示和状态反馈。

### 📊 数据查看模块

#### 2. 标签统计与分析
- **查看所有标签**: 显示所有标签及其使用频率
- **查看特定标签详情**: 输入标签名查看使用该标签的所有文章
- **按频率分组查看**: 
  - 高频标签 (≥5篇文章)
  - 中频标签 (2-4篇文章)  
  - 低频标签 (1篇文章)

#### 3. 分类统计
显示所有分类及其文章数量、占比信息

#### 4. 无标签文章
列出所有没有标签的文章，便于后续添加标签

### 🏷️ 标签页面管理

#### 5. 预览标签页面
- 扫描所有标签并生成翻译预览
- 显示将要创建的目录结构
- 展示新建/更新的页面数量统计

#### 6. 生成标签页面
- **处理模式选择**:
  - 仅新增: 只为没有页面的标签创建页面
  - 仅更新: 只更新已存在的标签页面
  - 全部处理: 新建+更新所有标签页面

生成的文件结构：
```
content/tags/
├── 标签名1/
│   └── _index.md
├── 标签名2/
│   └── _index.md
└── ...
```

每个 `_index.md` 包含：
```yaml
---
title: 标签名
slug: "english-slug"
description: 包含 N 篇关于 标签名 的文章
---
```

### 📝 文章管理模块

#### 7. 预览文章Slug
- 扫描所有文章并分析Slug状态
- 显示缺少Slug的文章数量
- 预览生成的Slug示例（前5个）

#### 8. 生成文章Slug
- **处理模式选择**:
  - 仅新增: 只为缺少slug的文章添加
  - 仅更新: 只更新已有的slug
  - 全部处理: 新增+更新所有文章

为文章添加或更新Front Matter中的slug字段：
```yaml
---
title: "我的文章标题"
slug: "my-article-title"
date: 2024-01-01
---
```

#### 9. 预览文章翻译
- 扫描所有中文文章
- 检查对应的英文版本是否存在
- 显示需要翻译的文章列表

#### 10. 翻译文章为英文
- **翻译模式选择**:
  - 仅翻译缺失的文章
  - 重新翻译现有文章
  - 翻译全部文章

翻译功能特点：
- 智能检测中文文章
- 生成对应的英文目录结构
- 翻译标题、内容和Front Matter
- 保持原有格式和结构

### 💾 缓存管理模块

#### 11. 查看缓存状态
显示翻译缓存的详细信息：
- 缓存文件位置
- 版本信息
- 最后更新时间
- 翻译条目数量

#### 12. 预览全量翻译缓存
- 分析所有需要翻译的内容
- 区分标签翻译和文章翻译
- 显示缓存缺失的项目列表
- 预估翻译工作量

#### 13. 生成全量翻译缓存
- 批量翻译所有标签和文章标题
- 分别处理标签和文章翻译
- 实时显示翻译进度
- 自动保存到缓存文件

#### 14. 清空翻译缓存 (支持分类)
- 支持分类清空缓存
- 可选择清空标签缓存或文章缓存
- 或者清空全部缓存

### 🔧 系统工具模块

#### 15. 查看性能统计
显示详细的性能监控信息：
```
📊 性能统计:
🔄 翻译次数: 156
⚡ 缓存命中率: 87.5% (140/160)
⏱️ 平均翻译时间: 1.2s
📁 文件操作: 89
❌ 错误次数: 2
```

#### 16. 重置性能统计
清空所有性能统计数据，重新开始统计。

## AI翻译功能

### 翻译原理
1. **中文检测**: 自动识别中文标签和文章
2. **AI翻译**: 使用LM Studio进行智能翻译
3. **格式规范**: 自动转换为符合URL规范的slug格式
4. **缓存存储**: 翻译结果本地缓存，避免重复请求

### 翻译规则
- 使用小写字母
- 单词间用连字符(-)连接
- 移除特殊字符
- 保持简洁准确

### 备用翻译
当AI翻译失败时，自动使用预定义的翻译映射：
```go
"人工智能" -> "artificial-intelligence"
"机器学习" -> "machine-learning"
"前端开发" -> "frontend-development"
// ... 更多映射
```

## 批量处理

### 标签批量翻译
- 自动收集所有需要翻译的标签
- 利用缓存减少重复翻译
- 显示处理进度和统计信息

### 文章批量处理
- 扫描指定目录下的所有Markdown文件
- 解析Front Matter内容
- 批量生成或更新slug字段

### 文章翻译处理
- 智能检测中文文章
- 批量翻译文章内容
- 生成英文版本文件
- 保持目录结构一致

## 缓存机制

### 缓存文件格式
```json
{
  "version": "1.0",
  "last_updated": "2024-01-01T12:00:00Z",
  "translations": {
    "标签名": {
      "translation": "tag-name",
      "created_at": "2024-01-01T12:00:00Z",
      "updated_at": "2024-01-01T12:00:00Z"
    }
  }
}
```

### 缓存策略
- 首次翻译时写入缓存
- 后续使用直接从缓存读取
- 支持手动清空重新翻译
- 区分标签缓存和文章缓存

## 输出格式

### 统计表格
使用彩色表格显示统计数据：
- 🔴 红色: 高频标签/新建操作
- 🟡 黄色: 中频标签/更新操作  
- 🔵 蓝色: 低频标签/跳过操作
- 🟢 绿色: 成功状态

### 进度指示
- 实时显示处理进度
- 详细的错误信息提示
- 操作结果统计汇总

## 最佳实践

### 使用建议
1. **首次使用**: 使用"一键处理全部"功能快速初始化
2. **日常维护**: 定期运行数据查看功能了解博客状态
3. **标签管理**: 定期检查并清理低频标签
4. **备份**: 在批量操作前备份重要文件
5. **测试**: 在小范围内测试后再进行批量操作

### 性能优化
1. **缓存利用**: 充分利用翻译缓存减少API调用
2. **分批处理**: 大量文章建议分批处理
3. **网络稳定**: 确保LM Studio连接稳定
4. **监控使用**: 定期查看性能统计优化使用方式

## 故障排除

常见问题请参考 [故障排除指南](troubleshooting.md)

## 相关文档

- [配置文件说明](configuration.md)
- [日志系统指南](logging.md)
- [性能监控指南](performance.md)
- [API接口文档](api.md)
